<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-15">
<title> wafrag debug </title>
</head>

<body>
<h1></h1>

<button id="play" onclick="play();"> Play </button>
<button id="stop" onclick="stop();"> Stop </button>
<button id="suspend" onclick="suspend();"> Suspend </button>
<button id="resume" onclick="resume();"> Resume </button>

<hr>
<canvas id="keyboard" width="450" height="380"> </canvas>
<hr>

<script type="text/javascript" src="bin.js"> </script>
<script type="text/javascript" src="gen.js"> </script>
<script type="text/javascript" src="synth.js"> </script>
<script type="text/javascript" src="player.js"> </script>
<script type="text/javascript" src="wafrag.js"> </script>
<script type="text/javascript" src="keyboard.js"> </script>

<script type="text/javascript">

if (document.addEventListener) {
    document.addEventListener("DOMContentLoaded", setup);
}

var wafrag = new WAFrag();
var keyboard = new WAKeyboard('keyboard');
keyboard.init();

function setup() {
    var url = location.search.substr(1).split("&")[0];
    wafrag.loadSMF(url?url:"akatomb.mid", progress);
    wafrag.addNoteListener(keyboard);
}

function progress(i, n) {
    console.log("i:"+i+", n:"+n);
}

function play() { wafrag.play(); }
function stop() { wafrag.stop(); }
function suspend() { wafrag.suspend(); }
function resume() { wafrag.resume(); }

</script>

<address></address>
</body> </html>
